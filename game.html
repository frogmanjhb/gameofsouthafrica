<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Voices of the Past: South Africa</title>
    <link rel="icon" type="image/png" href="logo.png">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Courier New', monospace;
            background: linear-gradient(135deg, #2c3e50, #34495e);
            color: #ecf0f1;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            padding: 24px 16px;
        }

        .game-container {
            width: min(100%, 860px);
            background: rgba(0, 0, 0, 0.8);
            border: 3px solid #f39c12;
            border-radius: 10px;
            padding: 24px;
            box-shadow: 0 0 20px rgba(243, 156, 18, 0.3);
            margin: 0 auto;
        }

        .title-screen {
            text-align: center;
        }

        .game-title {
            font-size: 2.5em;
            color: #f39c12;
            margin-bottom: 20px;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.8);
        }

        .subtitle {
            font-size: 1.2em;
            margin-bottom: 30px;
            color: #bdc3c7;
        }

        .character-selection {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
            gap: 20px;
            max-width: 800px;
            margin: 0 auto;
        }

        .character-card {
            background: rgba(52, 73, 94, 0.8);
            border: 2px solid #3498db;
            border-radius: 10px;
            padding: 20px;
            cursor: pointer;
            transition: all 0.3s ease;
            width: 100%;
            min-height: 180px;
            text-align: center;
            display: flex;
            flex-direction: column;
            justify-content: center;
        }

        .character-card:hover {
            border-color: #f39c12;
            transform: translateY(-5px);
            box-shadow: 0 5px 15px rgba(243, 156, 18, 0.3);
        }

        .character-icon {
            font-size: 3em;
            margin-bottom: 10px;
        }

        .character-name {
            font-size: 1.3em;
            font-weight: bold;
            color: #3498db;
            margin-bottom: 10px;
        }

        .character-description {
            font-size: 0.9em;
            color: #bdc3c7;
        }

        .game-screen {
            display: none;
        }

        .background-image {
            width: 100%;
            height: 200px;
            background-size: cover;
            background-position: center;
            border-radius: 10px;
            margin-bottom: 20px;
            border: 2px solid #34495e;
        }

        .story-text {
            background: rgba(44, 62, 80, 0.9);
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 20px;
            border-left: 4px solid #f39c12;
            font-size: 1.1em;
            line-height: 1.6;
        }

        .choices {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .choice-button {
            background: rgba(52, 152, 219, 0.8);
            border: 2px solid #3498db;
            color: white;
            padding: 15px 20px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1em;
            transition: all 0.3s ease;
            text-align: left;
        }

        .choice-button:hover {
            background: rgba(52, 152, 219, 1);
            border-color: #f39c12;
            transform: translateX(5px);
        }

        .choice-button:disabled {
            background: rgba(52, 152, 219, 0.5);
            border-color: #7f8c8d;
            color: #7f8c8d;
            cursor: not-allowed;
            transform: none;
        }

        .choice-countdown, .restart-countdown {
            font-weight: bold;
            transition: color 0.3s ease;
        }

        .back-button {
            background: rgba(231, 76, 60, 0.8);
            border: 2px solid #e74c3c;
            color: white;
            padding: 10px 20px;
            border-radius: 8px;
            cursor: pointer;
            margin-bottom: 20px;
            transition: all 0.3s ease;
        }

        .back-button:hover {
            background: rgba(231, 76, 60, 1);
        }

        .ending-screen {
            text-align: center;
            padding: 20px;
        }

        .ending-title {
            font-size: 2em;
            color: #f39c12;
            margin-bottom: 20px;
        }

        .ending-text {
            font-size: 1.2em;
            line-height: 1.6;
            margin-bottom: 30px;
        }

        .restart-button {
            background: rgba(46, 204, 113, 0.8);
            border: 2px solid #2ecc71;
            color: white;
            padding: 15px 30px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1.1em;
            transition: all 0.3s ease;
        }

        .restart-button:hover {
            background: rgba(46, 204, 113, 1);
        }

        .restart-button:disabled {
            background: rgba(46, 204, 113, 0.5);
            border-color: #7f8c8d;
            color: #7f8c8d;
            cursor: not-allowed;
            transform: none;
        }

        .info-button {
            background: rgba(52, 152, 219, 0.8);
            border: 2px solid #3498db;
            color: white;
            padding: 15px 25px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 0.9em;
            transition: all 0.3s ease;
            font-family: 'Courier New', monospace;
            display: flex;
            flex-direction: column;
            align-items: center;
            min-width: 150px;
            height: 80px;
            justify-content: center;
        }

        .info-button:hover {
            background: rgba(52, 152, 219, 1);
            border-color: #f39c12;
            transform: translateY(-2px);
        }

        .info-screen {
            text-align: left;
            max-height: 80vh;
            overflow-y: auto;
        }

        .info-title {
            font-size: 2em;
            color: #f39c12;
            text-align: center;
            margin-bottom: 20px;
        }

        .info-content {
            background: rgba(44, 62, 80, 0.9);
            padding: 20px;
            border-radius: 10px;
            border-left: 4px solid #f39c12;
        }

        .info-intro {
            font-size: 1.1em;
            margin-bottom: 25px;
            color: #ecf0f1;
            line-height: 1.6;
        }

        .character-info {
            background: rgba(52, 73, 94, 0.8);
            border: 2px solid #3498db;
            border-radius: 8px;
            padding: 20px;
            margin-bottom: 20px;
        }

        .character-info h3 {
            color: #f39c12;
            font-size: 1.3em;
            margin-bottom: 15px;
        }

        .character-info p {
            margin-bottom: 10px;
            line-height: 1.5;
        }

        .character-info ul {
            margin: 10px 0 15px 20px;
        }

        .character-info li {
            margin-bottom: 5px;
            line-height: 1.4;
        }

        .game-mechanics {
            background: rgba(46, 204, 113, 0.1);
            border: 2px solid #2ecc71;
            border-radius: 8px;
            padding: 20px;
            margin-top: 20px;
        }

        .game-mechanics h3 {
            color: #2ecc71;
            font-size: 1.3em;
            margin-bottom: 15px;
        }

        .game-mechanics h4 {
            color: #f39c12;
            font-size: 1.1em;
            margin: 15px 0 10px 0;
        }

        .game-mechanics ul {
            margin: 10px 0 15px 20px;
        }

        .game-mechanics li {
            margin-bottom: 8px;
            line-height: 1.5;
        }

        .menu-buttons {
            display: flex;
            gap: 20px;
            justify-content: center;
            margin-bottom: 30px;
            flex-wrap: wrap;
        }

        .collector-button {
            background: rgba(155, 89, 182, 0.8);
            border: 2px solid #9b59b6;
            color: white;
            padding: 15px 25px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 0.9em;
            transition: all 0.3s ease;
            font-family: 'Courier New', monospace;
            display: flex;
            flex-direction: column;
            align-items: center;
            min-width: 150px;
            height: 80px;
            justify-content: center;
        }

        .collector-button:hover {
            background: rgba(155, 89, 182, 1);
            border-color: #f39c12;
            transform: translateY(-2px);
        }

        .collector-icon {
            font-size: 1.2em;
            margin-bottom: 4px;
        }

        .collector-count {
            font-weight: bold;
            font-size: 1.1em;
            margin-bottom: 2px;
        }

        .collector-text {
            font-size: 0.8em;
            opacity: 0.9;
        }

        .mini-game-button {
            background: rgba(46, 204, 113, 0.8);
            border: 2px solid #2ecc71;
            color: white;
            padding: 15px 25px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 0.9em;
            transition: all 0.3s ease;
            font-family: 'Courier New', monospace;
            display: flex;
            flex-direction: column;
            align-items: center;
            min-width: 150px;
            height: 80px;
            justify-content: center;
        }

        .mini-game-button:hover {
            background: rgba(46, 204, 113, 1);
            border-color: #27ae60;
            transform: translateY(-2px);
        }

        .mini-game-icon {
            font-size: 1.2em;
            margin-bottom: 4px;
        }

        .mini-game-count {
            font-weight: bold;
            font-size: 1.1em;
            margin-bottom: 2px;
        }

        .test-mini-games-button {
            background: rgba(230, 126, 34, 0.8);
            border: 2px solid #e67e22;
            color: white;
            padding: 12px 20px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 0.9em;
            transition: all 0.3s ease;
            font-family: 'Courier New', monospace;
            display: flex;
            flex-direction: column;
            align-items: center;
            min-width: 120px;
        }

        .test-mini-games-button:hover {
            background: rgba(230, 126, 34, 1);
            border-color: #d35400;
            transform: translateY(-2px);
        }

        .test-all-games-section {
            text-align: center;
            margin-top: 30px;
        }

        .test-icon {
            font-size: 1.2em;
            margin-bottom: 4px;
        }

        .test-text {
            font-size: 0.8em;
            opacity: 0.9;
            text-align: center;
        }

        .mini-game-text {
            font-size: 0.8em;
            opacity: 0.9;
            text-align: center;
        }

        .quiz-button {
            background: rgba(230, 126, 34, 0.8);
            border: 2px solid #e67e22;
            color: white;
            padding: 15px 25px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 0.9em;
            transition: all 0.3s ease;
            font-family: 'Courier New', monospace;
            display: flex;
            flex-direction: column;
            align-items: center;
            min-width: 150px;
            height: 80px;
            justify-content: center;
        }

        .quiz-button:hover {
            background: rgba(230, 126, 34, 1);
            border-color: #f39c12;
            transform: translateY(-2px);
        }

        .quiz-icon {
            font-size: 1.2em;
            margin-bottom: 4px;
        }

        .quiz-text {
            font-size: 0.8em;
            opacity: 0.9;
            text-align: center;
        }


        /* Mini-Game Collection Styles */
        .mini-game-screen {
            text-align: left;
            max-height: 85vh;
            overflow-y: auto;
        }

        .mini-game-collection-title {
            font-size: 2em;
            color: #8e44ad;
            text-align: center;
            margin-bottom: 15px;
        }

        .mini-game-progress {
            text-align: center;
            font-size: 1.1em;
            color: #f39c12;
            margin-bottom: 25px;
            font-weight: bold;
        }

        .mini-games-container {
            background: rgba(44, 62, 80, 0.9);
            border-radius: 10px;
            padding: 20px;
            border-left: 4px solid #8e44ad;
        }

        .mini-game-item {
            background: rgba(52, 73, 94, 0.8);
            border: 2px solid #34495e;
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 20px;
            transition: all 0.3s ease;
        }

        .mini-game-item.unlocked {
            border-color: #8e44ad;
            background: rgba(142, 68, 173, 0.1);
        }

        .mini-game-item.locked {
            border-color: #7f8c8d;
            background: rgba(127, 140, 141, 0.1);
            filter: blur(1px);
            opacity: 0.7;
        }

        .mini-game-header {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-bottom: 15px;
        }

        .mini-game-emoji {
            font-size: 2.5em;
        }

        .mini-game-info {
            flex: 1;
        }

        .mini-game-title {
            font-size: 1.4em;
            margin: 0 0 5px 0;
            color: #f39c12;
        }

        .mini-game-item.unlocked .mini-game-title {
            color: #8e44ad;
        }

        .mini-game-item.locked .mini-game-title {
            color: #7f8c8d;
        }

        .mini-game-subtitle {
            font-size: 0.9em;
            color: #bdc3c7;
            margin: 0;
            font-style: italic;
        }

        .mini-game-item.locked .mini-game-subtitle {
            color: #7f8c8d;
        }

        .mini-game-status {
            display: flex;
            flex-direction: column;
            align-items: center;
            text-align: center;
        }

        .status-icon {
            font-size: 1.5em;
            margin-bottom: 5px;
        }

        .status-text {
            font-size: 0.8em;
            font-weight: bold;
        }

        .mini-game-item.unlocked .status-text {
            color: #8e44ad;
        }

        .mini-game-item.locked .status-text {
            color: #7f8c8d;
        }

        .mini-game-description {
            margin-bottom: 20px;
        }

        .description-text {
            line-height: 1.6;
            margin-bottom: 15px;
            color: #ecf0f1;
        }

        .mini-game-item.locked .description-text {
            color: #7f8c8d;
        }

        .unlock-condition {
            background: rgba(44, 62, 80, 0.8);
            border: 1px solid #34495e;
            border-radius: 8px;
            padding: 12px;
            font-size: 0.9em;
            color: #bdc3c7;
        }

        .mini-game-item.locked .unlock-condition {
            border-color: #7f8c8d;
            color: #7f8c8d;
        }

        .mini-game-actions {
            text-align: center;
        }

        .play-mini-game-btn {
            background: rgba(142, 68, 173, 0.8);
            border: 2px solid #8e44ad;
            color: white;
            padding: 15px 30px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1.1em;
            transition: all 0.3s ease;
            font-family: 'Courier New', monospace;
            display: inline-flex;
            align-items: center;
            gap: 10px;
        }

        .play-mini-game-btn:hover:not(:disabled) {
            background: rgba(142, 68, 173, 1);
            border-color: #f39c12;
            transform: translateY(-2px);
        }

        .play-mini-game-btn:disabled {
            background: rgba(127, 140, 141, 0.3);
            border-color: #7f8c8d;
            color: #7f8c8d;
            cursor: not-allowed;
            transform: none;
        }

        /* Progress Bar Styles */
        .progress-bar-container {
            margin: 10px 0;
            padding: 8px 0;
        }

        .progress-bar-label {
            display: flex;
            justify-content: space-between;
            margin-bottom: 5px;
            font-size: 0.9em;
            color: #ecf0f1;
        }

        .progress-bar {
            width: 100%;
            height: 12px;
            background: #34495e;
            border-radius: 6px;
            overflow: hidden;
            border: 1px solid #2c3e50;
        }

        .progress-bar-fill {
            height: 100%;
            background: linear-gradient(90deg, #e74c3c, #f39c12);
            border-radius: 6px;
            transition: width 0.3s ease;
            min-width: 0%;
        }

        .mini-game-item.unlocked .progress-bar-container {
            display: none;
        }

        /* Mobile responsiveness for progress bars */
        @media (max-width: 768px) {
            body {
                padding: 20px 12px;
            }

            .game-container {
                padding: 20px;
            }

            .progress-bar-label {
                font-size: 0.8em;
            }
            
            .progress-bar {
                height: 10px;
            }
        }

        .play-icon {
            font-size: 1em;
        }

        .collector-screen {
            text-align: left;
            max-height: 85vh;
            overflow-y: auto;
        }

        .collector-title {
            font-size: 2em;
            color: #9b59b6;
            text-align: center;
            margin-bottom: 15px;
        }

        .collector-progress {
            text-align: center;
            font-size: 1.1em;
            color: #f39c12;
            margin-bottom: 25px;
            font-weight: bold;
        }

        .character-tabs {
            display: flex;
            justify-content: center;
            margin-bottom: 25px;
            gap: 10px;
            flex-wrap: wrap;
        }

        .tab-button {
            background: rgba(52, 73, 94, 0.8);
            border: 2px solid #34495e;
            color: #bdc3c7;
            padding: 12px 20px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 0.9em;
            transition: all 0.3s ease;
            font-family: 'Courier New', monospace;
        }

        .tab-button.active {
            background: rgba(52, 152, 219, 0.8);
            border-color: #3498db;
            color: white;
        }

        .tab-button:hover {
            border-color: #f39c12;
        }

        .endings-container {
            background: rgba(44, 62, 80, 0.9);
            border-radius: 10px;
            padding: 20px;
            border-left: 4px solid #9b59b6;
        }

        .character-endings {
            display: none;
        }

        .character-endings.active {
            display: block;
        }

        .ending-item {
            background: rgba(52, 73, 94, 0.8);
            border: 2px solid #34495e;
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 15px;
            transition: all 0.3s ease;
        }

        .ending-item.collected {
            border-color: #2ecc71;
            background: rgba(46, 204, 113, 0.1);
        }

        .ending-item.locked {
            border-color: #7f8c8d;
            background: rgba(127, 140, 141, 0.1);
            filter: blur(2px);
            opacity: 0.6;
        }

        .ending-title {
            font-size: 1.1em;
            font-weight: bold;
            margin-bottom: 8px;
            color: #f39c12;
        }

        .ending-item.collected .ending-title {
            color: #2ecc71;
        }

        .ending-item.locked .ending-title {
            color: #7f8c8d;
        }

        .ending-description {
            line-height: 1.5;
            font-size: 0.95em;
        }

        .ending-item.locked .ending-description {
            color: #7f8c8d;
        }

        .ending-status {
            font-size: 0.8em;
            margin-top: 8px;
            font-style: italic;
        }

        .ending-item.collected .ending-status {
            color: #2ecc71;
        }

        .ending-item.locked .ending-status {
            color: #7f8c8d;
        }

        /* Quiz Screen Styles */
        .quiz-screen {
            text-align: center;
            max-height: 90vh;
            overflow-y: auto;
        }

        .quiz-title {
            font-size: 2em;
            color: #e67e22;
            margin-bottom: 15px;
        }

        .quiz-info {
            background: rgba(44, 62, 80, 0.9);
            padding: 15px;
            border-radius: 10px;
            margin-bottom: 20px;
            border-left: 4px solid #e67e22;
        }

        .quiz-subtitle {
            font-style: italic;
            color: #bdc3c7;
            margin-top: 10px;
        }

        .quiz-progress {
            text-align: center;
            font-size: 1.2em;
            color: #f39c12;
            margin-bottom: 25px;
            font-weight: bold;
        }

        .quiz-container {
            background: rgba(44, 62, 80, 0.9);
            padding: 25px;
            border-radius: 10px;
            border-left: 4px solid #e67e22;
            max-width: 800px;
            margin: 0 auto;
        }

        .quiz-question {
            font-size: 1.3em;
            margin-bottom: 30px;
            color: #ecf0f1;
            line-height: 1.5;
        }

        .quiz-options {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin-bottom: 30px;
        }

        .quiz-option {
            background: rgba(52, 152, 219, 0.8);
            border: 2px solid #3498db;
            border-radius: 12px;
            padding: 20px;
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: left;
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .quiz-option:hover {
            background: rgba(52, 152, 219, 1);
            border-color: #f39c12;
            transform: translateY(-2px);
        }

        .quiz-option.selected {
            background: rgba(46, 204, 113, 0.8);
            border-color: #2ecc71;
        }

        .option-letter {
            background: rgba(0, 0, 0, 0.3);
            color: white;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 1.1em;
        }

        .option-text {
            flex: 1;
            font-size: 1em;
        }

        .quiz-controls {
            text-align: center;
        }

        .submit-quiz-btn {
            background: rgba(46, 204, 113, 0.8);
            border: 2px solid #2ecc71;
            color: white;
            padding: 15px 30px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1.2em;
            transition: all 0.3s ease;
            font-family: 'Courier New', monospace;
        }

        .submit-quiz-btn:hover:not(:disabled) {
            background: rgba(46, 204, 113, 1);
            border-color: #27ae60;
            transform: translateY(-2px);
        }

        .submit-quiz-btn:disabled {
            background: rgba(127, 140, 141, 0.3);
            border-color: #7f8c8d;
            color: #7f8c8d;
            cursor: not-allowed;
            transform: none;
        }

        .quiz-result {
            background: rgba(44, 62, 80, 0.9);
            border: 3px solid #f39c12;
            border-radius: 15px;
            padding: 25px;
            margin-top: 20px;
            max-width: 600px;
            margin-left: auto;
            margin-right: auto;
        }

        .quiz-result h3 {
            color: #f39c12;
            font-size: 1.8em;
            margin-bottom: 15px;
        }

        .quiz-success {
            background: rgba(46, 204, 113, 0.1);
            border: 2px solid #2ecc71;
            border-radius: 10px;
            padding: 20px;
            margin: 20px 0;
        }

        .quiz-failure {
            background: rgba(231, 76, 60, 0.1);
            border: 2px solid #e74c3c;
            border-radius: 10px;
            padding: 20px;
            margin: 20px 0;
        }

        .play-fort-defense-btn, .restart-quiz-btn {
            background: rgba(243, 156, 18, 0.8);
            border: 2px solid #f39c12;
            color: white;
            padding: 12px 25px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1.1em;
            transition: all 0.3s ease;
            font-family: 'Courier New', monospace;
            margin: 10px;
        }

        .play-fort-defense-btn:hover, .restart-quiz-btn:hover {
            background: rgba(243, 156, 18, 1);
            border-color: #e67e22;
            transform: translateY(-2px);
        }

        /* Fort Defense Screen Styles */
        .fort-defense-screen {
            text-align: center;
            max-height: 90vh;
            overflow-y: auto;
        }

        .fort-defense-title {
            font-size: 2em;
            color: #e74c3c;
            margin-bottom: 15px;
        }

        .fort-defense-info {
            background: rgba(44, 62, 80, 0.9);
            padding: 15px;
            border-radius: 10px;
            margin-bottom: 20px;
            border-left: 4px solid #e74c3c;
        }

        .fort-defense-subtitle {
            font-style: italic;
            color: #bdc3c7;
            margin-top: 10px;
        }

        .fort-defense-stats {
            display: flex;
            justify-content: space-around;
            background: rgba(52, 73, 94, 0.8);
            padding: 15px;
            border-radius: 10px;
            margin-bottom: 25px;
            flex-wrap: wrap;
            gap: 10px;
        }

        .fort-defense-game-area {
            background: rgba(44, 62, 80, 0.9);
            padding: 25px;
            border-radius: 10px;
            border-left: 4px solid #c0392b;
        }

        #fortDefenseCanvas {
            border: 3px solid #e74c3c;
            border-radius: 10px;
            background: #87CEEB;
            display: block;
            margin: 0 auto 20px auto;
            max-width: 100%;
            height: auto;
        }

        .fort-defense-controls {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 30px;
            margin: 20px 0;
            flex-wrap: wrap;
        }

        .control-group {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 10px;
        }

        .control-group label {
            color: #ecf0f1;
            font-weight: bold;
            font-size: 1.1em;
        }

        .control-group input[type="range"] {
            width: 150px;
            height: 8px;
            border-radius: 5px;
            background: #34495e;
            outline: none;
            -webkit-appearance: none;
        }

        .control-group input[type="range"]::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: #e74c3c;
            cursor: pointer;
        }

        .control-group input[type="range"]::-moz-range-thumb {
            appearance: none;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: #e74c3c;
            cursor: pointer;
            border: none;
        }

        .fire-btn {
            background: rgba(231, 76, 60, 0.8);
            border: 2px solid #e74c3c;
            color: white;
            padding: 15px 30px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1.3em;
            font-weight: bold;
            transition: all 0.3s ease;
            font-family: 'Courier New', monospace;
        }

        .fire-btn:hover {
            background: rgba(231, 76, 60, 1);
            border-color: #c0392b;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(231, 76, 60, 0.3);
        }

        .fort-defense-instructions {
            background: rgba(52, 73, 94, 0.8);
            border: 2px solid #34495e;
            border-radius: 10px;
            padding: 20px;
            text-align: left;
            max-width: 600px;
            margin: 0 auto;
        }

        .fort-defense-instructions h3 {
            color: #e74c3c;
            text-align: center;
            margin-bottom: 15px;
        }

        .fort-defense-instructions p {
            margin-bottom: 10px;
            line-height: 1.5;
        }

        .fort-defense-game-over {
            background: rgba(52, 73, 94, 0.9);
            border: 3px solid #e74c3c;
            border-radius: 15px;
            padding: 25px;
            margin-top: 20px;
            max-width: 600px;
            margin-left: auto;
            margin-right: auto;
        }

        .fort-defense-game-over h3 {
            color: #e74c3c;
            font-size: 1.8em;
            margin-bottom: 15px;
        }

        .fort-defense-game-over p {
            font-size: 1.2em;
            margin-bottom: 20px;
        }

        .fort-defense-final-stats {
            background: rgba(0, 0, 0, 0.3);
            padding: 15px;
            border-radius: 8px;
            margin: 20px 0;
        }

        .restart-fort-defense-btn, .exit-fort-defense-btn {
            background: rgba(231, 76, 60, 0.8);
            border: 2px solid #e74c3c;
            color: white;
            padding: 12px 25px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1.1em;
            transition: all 0.3s ease;
            font-family: 'Courier New', monospace;
            margin: 10px;
        }

        .restart-fort-defense-btn:hover {
            background: rgba(231, 76, 60, 1);
            border-color: #c0392b;
            transform: translateY(-2px);
        }

        .exit-fort-defense-btn {
            background: rgba(149, 165, 166, 0.8);
            border-color: #95a5a6;
        }

        .exit-fort-defense-btn:hover {
            background: rgba(149, 165, 166, 1);
            border-color: #7f8c8d;
        }

        /* Test Mini-Games Screen Styles */
        .test-mini-games-screen {
            text-align: center;
            max-height: 90vh;
            overflow-y: auto;
        }

        .test-title {
            font-size: 2em;
            color: #e67e22;
            margin-bottom: 15px;
        }

        .test-info {
            background: rgba(44, 62, 80, 0.9);
            padding: 15px;
            border-radius: 10px;
            margin-bottom: 20px;
            border-left: 4px solid #e67e22;
        }

        .test-subtitle {
            font-style: italic;
            color: #bdc3c7;
            margin-top: 10px;
        }

        .test-games-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            max-width: 800px;
            margin: 0 auto;
        }

        .test-game-item {
            background: rgba(52, 152, 219, 0.8);
            border: 2px solid #3498db;
            border-radius: 12px;
            padding: 20px;
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: center;
        }

        .test-game-item:hover {
            background: rgba(52, 152, 219, 1);
            border-color: #f39c12;
            transform: translateY(-5px);
            box-shadow: 0 5px 15px rgba(52, 152, 219, 0.3);
        }

        .test-game-emoji {
            font-size: 3em;
            display: block;
            margin-bottom: 10px;
        }

        .test-game-item h3 {
            color: #ecf0f1;
            margin-bottom: 10px;
            font-size: 1.2em;
        }

        .test-game-item p {
            color: #bdc3c7;
            font-size: 0.9em;
            margin: 0;
        }

        /* Trading Challenge Styles */
        .trading-challenge-screen {
            text-align: center;
            max-height: 90vh;
            overflow-y: auto;
        }

        .trading-title {
            font-size: 2em;
            color: #f39c12;
            margin-bottom: 15px;
        }

        .challenge-info {
            background: rgba(44, 62, 80, 0.9);
            padding: 15px;
            border-radius: 10px;
            margin-bottom: 20px;
            border-left: 4px solid #f39c12;
        }

        .challenge-subtitle {
            font-style: italic;
            color: #bdc3c7;
            margin-top: 10px;
        }

        .game-stats {
            display: flex;
            justify-content: space-around;
            background: rgba(52, 73, 94, 0.8);
            padding: 15px;
            border-radius: 10px;
            margin-bottom: 25px;
        }

        .stat {
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        .stat-label {
            font-size: 0.9em;
            color: #bdc3c7;
            margin-bottom: 5px;
        }

        .stat-value {
            font-size: 1.3em;
            font-weight: bold;
            color: #f39c12;
        }

        .trading-game-area {
            background: rgba(44, 62, 80, 0.9);
            padding: 25px;
            border-radius: 10px;
            border-left: 4px solid #e67e22;
        }

        .current-item {
            margin-bottom: 30px;
        }

        .trade-item-display {
            background: rgba(52, 152, 219, 0.2);
            border: 3px solid #3498db;
            border-radius: 15px;
            padding: 20px;
            display: inline-flex;
            align-items: center;
            gap: 15px;
            min-width: 200px;
        }

        .item-icon {
            font-size: 3em;
        }

        .item-name {
            font-size: 1.5em;
            font-weight: bold;
            color: #3498db;
        }

        .value-options {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 15px;
            max-width: 600px;
            margin: 0 auto;
        }

        .value-option {
            background: rgba(46, 204, 113, 0.8);
            border: 2px solid #2ecc71;
            border-radius: 12px;
            padding: 20px;
            cursor: pointer;
            transition: all 0.3s ease;
            min-height: 80px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .value-option:hover {
            background: rgba(46, 204, 113, 1);
            border-color: #f39c12;
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(46, 204, 113, 0.3);
        }

        .value-option.correct {
            background: rgba(46, 204, 113, 1);
            border-color: #27ae60;
            animation: correctPulse 0.6s ease;
        }

        .value-option.incorrect {
            background: rgba(231, 76, 60, 0.8);
            border-color: #e74c3c;
            animation: incorrectShake 0.6s ease;
        }

        .value-number {
            font-size: 2em;
            font-weight: bold;
            color: white;
        }

        .challenge-result {
            background: rgba(52, 73, 94, 0.9);
            border: 3px solid #f39c12;
            border-radius: 15px;
            padding: 25px;
            margin-top: 20px;
        }

        .challenge-result h3 {
            color: #f39c12;
            font-size: 1.8em;
            margin-bottom: 15px;
        }

        .challenge-result p {
            font-size: 1.2em;
            margin-bottom: 20px;
        }

        .historical-context {
            background: rgba(44, 62, 80, 0.8);
            border: 2px solid #3498db;
            border-radius: 10px;
            padding: 20px;
            margin: 20px 0;
            text-align: left;
        }

        .historical-context h4 {
            color: #3498db;
            margin-bottom: 10px;
        }

        @keyframes correctPulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.1); }
            100% { transform: scale(1); }
        }

        @keyframes incorrectShake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-5px); }
            75% { transform: translateX(5px); }
        }

        /* Harbor Hustle Styles */
        .harbor-hustle-screen {
            background: linear-gradient(135deg, #1e3c72, #2a5298);
            color: white;
            padding: 20px;
            min-height: 100vh;
            font-family: 'Courier New', monospace;
        }

        .harbor-title {
            text-align: center;
            color: #f39c12;
            margin-bottom: 20px;
            font-size: 2.5em;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);
        }

        .harbor-info {
            text-align: center;
            margin-bottom: 20px;
            background: rgba(0, 0, 0, 0.3);
            padding: 15px;
            border-radius: 10px;
            border: 2px solid #3498db;
        }

        .harbor-subtitle {
            font-style: italic;
            color: #bdc3c7;
            margin-top: 10px;
        }

        .harbor-stats {
            display: flex;
            justify-content: center;
            gap: 30px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }

        .harbor-game-area {
            display: flex;
            gap: 20px;
            margin-bottom: 20px;
            min-height: 400px;
        }

        .dock-area, .ship-area {
            flex: 1;
            background: rgba(0, 0, 0, 0.2);
            border: 2px solid #3498db;
            border-radius: 10px;
            padding: 15px;
        }

        .dock-area h3, .ship-area h3 {
            text-align: center;
            color: #f39c12;
            margin-bottom: 15px;
        }

        .supplies-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(80px, 1fr));
            gap: 10px;
            min-height: 200px;
        }

        .supply-item {
            background: #e74c3c;
            border: 2px solid #c0392b;
            border-radius: 8px;
            padding: 10px;
            text-align: center;
            cursor: grab;
            transition: all 0.3s ease;
            user-select: none;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 80px;
        }

        .supply-item:hover {
            transform: scale(1.05);
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);
        }

        .supply-item:active {
            cursor: grabbing;
            transform: scale(0.95);
        }

        .supply-item.dragging {
            opacity: 0.7;
            transform: rotate(5deg);
            z-index: 1000;
        }

        .supply-emoji {
            font-size: 2em;
            margin-bottom: 5px;
        }

        .supply-name {
            font-size: 0.8em;
            font-weight: bold;
        }

        .ship-container {
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 200px;
        }

        .ship {
            background: #8b4513;
            border: 3px solid #654321;
            border-radius: 15px;
            padding: 20px;
            position: relative;
            min-width: 200px;
            min-height: 150px;
        }

        .ship-deck {
            position: relative;
            width: 100%;
            height: 100%;
        }

        .ship-mast {
            position: absolute;
            top: -10px;
            left: 50%;
            transform: translateX(-50%);
            font-size: 2em;
        }

        .loading-zone {
            background: rgba(52, 152, 219, 0.3);
            border: 2px dashed #3498db;
            border-radius: 10px;
            padding: 20px;
            text-align: center;
            min-height: 100px;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
        }

        .loading-zone.drag-over {
            background: rgba(52, 152, 219, 0.6);
            border-color: #f39c12;
            transform: scale(1.02);
        }

        .harbor-instructions {
            background: rgba(0, 0, 0, 0.3);
            padding: 15px;
            border-radius: 10px;
            margin-bottom: 20px;
            text-align: center;
        }

        .harbor-controls {
            text-align: center;
            margin-bottom: 20px;
        }

        .start-harbor-btn, .restart-harbor-btn, .exit-harbor-btn {
            background: #e74c3c;
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1.1em;
            font-family: 'Courier New', monospace;
            margin: 0 10px;
            transition: all 0.3s ease;
        }

        .start-harbor-btn:hover, .restart-harbor-btn:hover {
            background: #c0392b;
            transform: translateY(-2px);
        }

        .exit-harbor-btn {
            background: #95a5a6;
        }

        .exit-harbor-btn:hover {
            background: #7f8c8d;
        }

        .harbor-game-over {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: linear-gradient(135deg, #2c3e50, #34495e);
            border: 3px solid #e74c3c;
            border-radius: 15px;
            padding: 30px;
            text-align: center;
            color: white;
            z-index: 1000;
            min-width: 400px;
        }

        .harbor-final-stats {
            margin: 20px 0;
            background: rgba(0, 0, 0, 0.3);
            padding: 15px;
            border-radius: 8px;
        }

        .harbor-final-stats p {
            margin: 10px 0;
            font-size: 1.1em;
        }

        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-5px); }
            75% { transform: translateX(5px); }
        }

        /* Cattle Chase Styles */
        .cattle-chase-screen {
            text-align: center;
            max-height: 90vh;
            overflow-y: auto;
        }

        .cattle-title {
            font-size: 2em;
            color: #e67e22;
            margin-bottom: 15px;
        }

        .cattle-info {
            background: rgba(44, 62, 80, 0.9);
            padding: 15px;
            border-radius: 10px;
            margin-bottom: 20px;
            border-left: 4px solid #e67e22;
        }

        .cattle-subtitle {
            font-style: italic;
            color: #bdc3c7;
            margin-top: 10px;
        }

        .cattle-stats {
            display: flex;
            justify-content: space-around;
            background: rgba(52, 73, 94, 0.8);
            padding: 15px;
            border-radius: 10px;
            margin-bottom: 25px;
            flex-wrap: wrap;
            gap: 10px;
        }

        .cattle-game-area {
            background: rgba(44, 62, 80, 0.9);
            padding: 25px;
            border-radius: 10px;
            border-left: 4px solid #d35400;
        }

        #cattleCanvas {
            border: 3px solid #e67e22;
            border-radius: 10px;
            background: #2ecc71;
            display: block;
            margin: 0 auto 20px auto;
            max-width: 100%;
            height: auto;
        }

        .cattle-instructions {
            background: rgba(52, 73, 94, 0.8);
            border: 2px solid #34495e;
            border-radius: 10px;
            padding: 20px;
            text-align: left;
            max-width: 600px;
            margin: 0 auto;
        }

        .cattle-instructions h3 {
            color: #e67e22;
            text-align: center;
            margin-bottom: 15px;
        }

        .cattle-instructions p {
            margin-bottom: 10px;
            line-height: 1.5;
        }

        .start-cattle-btn {
            background: rgba(230, 126, 34, 0.8);
            border: 2px solid #e67e22;
            color: white;
            padding: 15px 30px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1.1em;
            transition: all 0.3s ease;
            font-family: 'Courier New', monospace;
            display: flex;
            align-items: center;
            gap: 10px;
            margin: 20px auto 0;
            width: fit-content;
        }

        .start-cattle-btn:hover {
            background: rgba(230, 126, 34, 1);
            border-color: #f39c12;
            transform: translateY(-2px);
        }

        .cattle-game-over {
            background: rgba(52, 73, 94, 0.9);
            border: 3px solid #e67e22;
            border-radius: 15px;
            padding: 25px;
            margin-top: 20px;
            max-width: 600px;
            margin-left: auto;
            margin-right: auto;
        }

        .cattle-game-over h3 {
            color: #e67e22;
            font-size: 1.8em;
            margin-bottom: 15px;
        }

        .cattle-game-over p {
            font-size: 1.2em;
            margin-bottom: 20px;
        }

        /* Land Grab Maze Styles */
        .land-grab-maze-screen {
            text-align: center;
            max-height: 90vh;
            overflow-y: auto;
            background: linear-gradient(135deg, #2c3e50, #34495e);
            color: white;
            font-family: 'Courier New', monospace;
        }

        .maze-title {
            font-size: 2.5em;
            color: #f39c12;
            margin-bottom: 15px;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.8);
        }

        .maze-subtitle {
            font-style: italic;
            color: #bdc3c7;
            margin-bottom: 20px;
        }

        .maze-info {
            background: rgba(44, 62, 80, 0.9);
            padding: 15px;
            border-radius: 10px;
            margin-bottom: 20px;
            border-left: 4px solid #f39c12;
        }

        .maze-stats {
            display: flex;
            justify-content: space-around;
            background: rgba(52, 73, 94, 0.8);
            padding: 15px;
            border-radius: 10px;
            margin-bottom: 25px;
            flex-wrap: wrap;
            gap: 10px;
        }

        .maze-game-area {
            background: rgba(44, 62, 80, 0.9);
            padding: 25px;
            border-radius: 10px;
            border-left: 4px solid #e67e22;
        }

        #mazeCanvas {
            border: 3px solid #f39c12;
            border-radius: 10px;
            background: #2c3e50;
            display: block;
            margin: 0 auto 20px auto;
            max-width: 100%;
            height: auto;
        }

        .maze-instructions {
            background: rgba(52, 73, 94, 0.8);
            border: 2px solid #34495e;
            border-radius: 10px;
            padding: 20px;
            text-align: left;
            max-width: 600px;
            margin: 0 auto;
        }

        .maze-instructions h3 {
            color: #f39c12;
            text-align: center;
            margin-bottom: 15px;
        }

        .maze-instructions p {
            margin-bottom: 10px;
            line-height: 1.5;
        }

        .start-maze-btn {
            background: rgba(243, 156, 18, 0.8);
            border: 2px solid #f39c12;
            color: white;
            padding: 15px 30px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1.1em;
            transition: all 0.3s ease;
            font-family: 'Courier New', monospace;
            display: flex;
            align-items: center;
            gap: 10px;
            margin: 20px auto 0;
            width: fit-content;
        }

        .start-maze-btn:hover {
            background: rgba(243, 156, 18, 1);
            border-color: #e67e22;
            transform: translateY(-2px);
        }

        .maze-start-section {
            text-align: center;
            margin: 20px 0;
            padding: 15px;
        }

        .game-info-grid {
            display: grid;
            grid-template-columns: 1fr 1fr 1fr;
            gap: 20px;
            margin-top: 20px;
        }

        .info-section {
            background: rgba(44, 62, 80, 0.6);
            border: 1px solid #34495e;
            border-radius: 8px;
            padding: 15px;
        }

        .info-section h4 {
            color: #f39c12;
            margin-bottom: 10px;
            font-size: 1em;
            text-align: center;
        }

        .info-section ul {
            list-style: none;
            padding: 0;
            margin: 0;
        }

        .info-section li {
            margin-bottom: 8px;
            font-size: 0.9em;
            line-height: 1.4;
        }

        @media (max-width: 768px) {
            .game-info-grid {
                grid-template-columns: 1fr;
                gap: 15px;
            }
        }

        .maze-game-over {
            background: rgba(52, 73, 94, 0.9);
            border: 3px solid #f39c12;
            border-radius: 15px;
            padding: 25px;
            margin-top: 20px;
            max-width: 600px;
            margin-left: auto;
            margin-right: auto;
        }

        .maze-game-over h3 {
            color: #f39c12;
            font-size: 1.8em;
            margin-bottom: 15px;
        }

        .maze-game-over p {
            font-size: 1.2em;
            margin-bottom: 20px;
        }

        .character-selection-maze {
            display: flex;
            justify-content: space-around;
            flex-wrap: wrap;
            gap: 20px;
            margin-bottom: 30px;
        }

        .character-card-maze {
            background: rgba(52, 73, 94, 0.8);
            border: 2px solid #3498db;
            border-radius: 10px;
            padding: 15px;
            cursor: pointer;
            transition: all 0.3s ease;
            width: 120px;
            height: 120px;
            text-align: center;
            display: flex;
            flex-direction: column;
            justify-content: center;
        }

        .character-card-maze:hover {
            border-color: #f39c12;
            transform: translateY(-5px);
            box-shadow: 0 5px 15px rgba(243, 156, 18, 0.3);
        }

        .character-card-maze.selected {
            border-color: #f39c12;
            background: rgba(243, 156, 18, 0.2);
        }

        .character-icon-maze {
            font-size: 2em;
            margin-bottom: 5px;
        }

        .character-name-maze {
            font-size: 0.9em;
            font-weight: bold;
            color: #3498db;
            margin-bottom: 3px;
        }

        .character-card-maze.selected .character-name-maze {
            color: #f39c12;
        }

        .character-description-maze {
            font-size: 0.7em;
            color: #bdc3c7;
        }

        .power-up-display {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin: 15px 0;
            flex-wrap: wrap;
        }

        .power-up-item {
            background: rgba(46, 204, 113, 0.8);
            border: 2px solid #2ecc71;
            border-radius: 8px;
            padding: 8px;
            text-align: center;
            width: 100px;
            height: 80px;
            display: flex;
            flex-direction: column;
            justify-content: center;
        }

        .power-up-item.active {
            background: rgba(46, 204, 113, 1);
            box-shadow: 0 0 10px rgba(46, 204, 113, 0.5);
        }

        .power-up-icon {
            font-size: 1.2em;
            display: block;
            margin-bottom: 3px;
        }

        .power-up-name {
            font-size: 0.7em;
            font-weight: bold;
        }

        .power-up-timer {
            font-size: 0.6em;
            color: #5d6d7e;
        }

        /* Frontier Wars Styles */
        .frontier-wars-screen {
            text-align: center;
            max-height: 90vh;
            overflow-y: auto;
        }

        .frontier-wars-title {
            font-size: 2em;
            color: #e74c3c;
            margin-bottom: 15px;
        }

        .frontier-wars-info {
            background: rgba(44, 62, 80, 0.9);
            padding: 15px;
            border-radius: 10px;
            margin-bottom: 20px;
            border-left: 4px solid #e74c3c;
        }

        .frontier-wars-subtitle {
            font-style: italic;
            color: #bdc3c7;
            margin-top: 10px;
        }

        .frontier-wars-stats {
            display: flex;
            justify-content: space-around;
            background: rgba(52, 73, 94, 0.8);
            padding: 15px;
            border-radius: 10px;
            margin-bottom: 25px;
            flex-wrap: wrap;
            gap: 10px;
        }

        .frontier-game-area {
            background: rgba(44, 62, 80, 0.9);
            padding: 25px;
            border-radius: 10px;
            border-left: 4px solid #c0392b;
        }

        #frontierCanvas {
            border: 3px solid #e74c3c;
            border-radius: 10px;
            background: #2ecc71;
            display: block;
            margin: 0 auto 20px auto;
            max-width: 100%;
            height: auto;
        }

        .frontier-instructions {
            background: rgba(52, 73, 94, 0.8);
            border: 2px solid #34495e;
            border-radius: 10px;
            padding: 20px;
            text-align: left;
            max-width: 600px;
            margin: 0 auto;
        }

        .frontier-instructions h3 {
            color: #e74c3c;
            text-align: center;
            margin-bottom: 15px;
        }

        .frontier-instructions p {
            margin-bottom: 10px;
            line-height: 1.5;
        }

        .start-frontier-btn {
            background: rgba(231, 76, 60, 0.8);
            border: 2px solid #e74c3c;
            color: white;
            padding: 15px 30px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1.1em;
            transition: all 0.3s ease;
            font-family: 'Courier New', monospace;
            display: flex;
            align-items: center;
            gap: 10px;
            margin: 20px auto 0;
            width: fit-content;
        }

        .start-frontier-btn:hover {
            background: rgba(231, 76, 60, 1);
            border-color: #f39c12;
            transform: translateY(-2px);
        }

        .frontier-game-over {
            background: rgba(52, 73, 94, 0.9);
            border: 3px solid #e74c3c;
            border-radius: 15px;
            padding: 25px;
            margin-top: 20px;
            max-width: 600px;
            margin-left: auto;
            margin-right: auto;
        }

        .frontier-game-over h3 {
            color: #e74c3c;
            font-size: 1.8em;
            margin-bottom: 15px;
        }

        .frontier-game-over p {
            font-size: 1.2em;
            margin-bottom: 20px;
        }

        @media (max-width: 600px) {
            body {
                justify-content: flex-start;
                align-items: stretch;
            }

            .game-container {
                width: 100%;
                padding: 20px;
                margin: 0;
            }

            .menu-buttons {
                flex-direction: column;
                align-items: stretch;
                width: 100%;
                gap: 15px;
            }

            .menu-buttons > * {
                width: 100%;
            }

            .character-selection {
                grid-template-columns: 1fr;
            }

            .character-card {
                min-height: auto;
                padding: 18px;
            }

            .game-title {
                font-size: 2em;
            }

            .info-screen {
                max-height: 75vh;
            }

            .character-info, .game-mechanics {
                padding: 15px;
            }

            .quiz-button, .test-mini-games-button {
                width: 100%;
            }

            .character-tabs {
                flex-direction: column;
            }

            .tab-button {
                width: 100%;
                text-align: center;
            }

            .game-stats {
                flex-direction: column;
                gap: 10px;
            }

            .value-options {
                grid-template-columns: repeat(2, 1fr);
                gap: 10px;
            }

            .value-option {
                padding: 15px;
                min-height: 60px;
            }

            .value-number {
                font-size: 1.5em;
            }

            .trade-item-display {
                min-width: auto;
                padding: 15px;
            }

            .item-icon {
                font-size: 2.5em;
            }

            .item-name {
                font-size: 1.2em;
            }

            .mini-game-header {
                flex-direction: column;
                text-align: center;
                gap: 10px;
            }

            .mini-game-emoji {
                font-size: 2em;
            }

            .play-mini-game-btn {
                padding: 12px 20px;
                font-size: 1em;
            }

            .cattle-stats {
                flex-direction: column;
                gap: 5px;
            }

            #cattleCanvas {
                width: 100%;
                max-width: 350px;
                height: auto;
            }

            .cattle-instructions {
                padding: 15px;
                text-align: center;
            }

            .start-cattle-btn {
                padding: 12px 20px;
                font-size: 1em;
            }

            .test-games-container {
                grid-template-columns: 1fr;
                gap: 15px;
            }

            .test-game-item {
                padding: 15px;
            }

            .test-game-emoji {
                font-size: 2.5em;
            }
        }
    </style>
</head>
<body>
    <div class="game-container">
        <!-- Title Screen -->
        <div id="titleScreen" class="title-screen">
            <h1 class="game-title">Voices of the Past: South Africa</h1>
            <p class="subtitle">Choose your character and step into history</p>
            
            <div class="menu-buttons">
                <button id="quizButton" class="quiz-button" onclick="showQuiz()">
                    <span class="quiz-icon"></span>
                    <span class="quiz-text">Take the Quiz</span>
                </button>
                <button id="infoButton" class="info-button" onclick="showInfo()"> Game Info</button>
                <button id="collectorButton" class="collector-button" onclick="showCollector()">
                    <span class="collector-icon"></span>
                    <span id="collectorCount" class="collector-count">0/128</span>
                    <span class="collector-text">Endings Collected</span>
                </button>
                <button id="miniGameButton" class="mini-game-button" onclick="showMiniGameCollection()">
                    <span class="mini-game-icon"></span>
                    <span id="miniGameCount" class="mini-game-count">0/6</span>
                    <span class="mini-game-text">Mini-Games</span>
                </button>
            </div>
            
            <div class="character-selection">
                <div class="character-card" onclick="startGame('khoisan')">
                    <div class="character-icon"></div>
                    <div class="character-name">Khoi-San</div>
                    <div class="character-description">A herder who moves with the seasons, caring for cattle and living off the land</div>
                </div>
                
                <div class="character-card" onclick="startGame('dutch')">
                    <div class="character-icon"></div>
                    <div class="character-name">Dutch Settler</div>
                    <div class="character-description">A settler sent by the Dutch East India Company to build a supply station</div>
                </div>
                
                <div class="character-card" onclick="startGame('britishColonist')">
                    <div class="character-icon"></div>
                    <div class="character-name">British Colonist</div>
                    <div class="character-description">A British official helping to expand British control over the Cape</div>
                </div>
                
                <div class="character-card" onclick="startGame('bantu')">
                    <div class="character-icon"></div>
                    <div class="character-name">Bantu Farmer</div>
                    <div class="character-description">A farmer and herder from a Bantu-speaking community migrating southward</div>
                </div>
            </div>
            
            <div class="test-all-games-section">
                <button id="testMiniGamesButton" class="test-mini-games-button" onclick="promptTestAllGamesPassword()">
                    <span class="test-icon"></span>
                    <span class="test-text">Test All Games</span>
                </button>
            </div>
        </div>

        <!-- Game Screen -->
        <div id="gameScreen" class="game-screen">
            <button id="backButton" class="back-button" onclick="goBack()"> Back to Character Selection</button>
            <div id="backgroundImage" class="background-image"></div>
            <div id="storyText" class="story-text"></div>
            <div id="choices" class="choices"></div>
        </div>

        <!-- Ending Screen -->
        <div id="endingScreen" class="ending-screen" style="display: none;">
            <h2 id="endingTitle" class="ending-title"></h2>
            <div id="endingText" class="ending-text"></div>
            <button class="restart-button" onclick="restartGame()">Play Again</button>
        </div>

        <!-- Info Screen -->
        <div id="infoScreen" class="info-screen" style="display: none;">
            <button class="back-button" onclick="hideInfo()"> Back to Main Menu</button>
            <h2 class="info-title">About the Game</h2>
            <div class="info-content">
                <p class="info-intro">The game allows players to experience South African colonial history (1400s-1800s) through the eyes of four different characters:</p>
                
                <div class="character-info">
                    <h3>1. Khoi-San Character </h3>
                    <p><strong>Role:</strong> A herder and hunter-gatherer living traditional life</p>
                    <p><strong>Timeline:</strong> From 1652 Dutch arrival through the 1700s</p>
                    <p><strong>Historical Figure:</strong>  <strong>Autshumato (Harry the Strandloper)</strong> - Translator and intermediary who warns about Dutch intentions</p>
                    <p><strong>Key Challenges:</strong></p>
                    <ul>
                        <li>Dealing with Dutch settlers arriving in 1652</li>
                        <li>Land conflicts and grazing rights</li>
                        <li>Smallpox epidemics devastating communities</li>
                        <li>Forced labor decisions</li>
                        <li>Migration vs. assimilation choices</li>
                    </ul>
                    <p><strong>Historical Focus:</strong> Loss of independence, displacement, and survival strategies</p>
                </div>

                <div class="character-info">
                    <h3>2. Dutch Settler </h3>
                    <p><strong>Role:</strong> A colonist sent by the Dutch East India Company</p>
                    <p><strong>Timeline:</strong> From 1652 through the frontier expansion period</p>
                    <p><strong>Historical Figure:</strong>  <strong>Jan van Riebeeck</strong> - Commander who establishes settlement strategy and Company policy</p>
                    <p><strong>Key Challenges:</strong></p>
                    <ul>
                        <li>Trading vs. taking land from Khoi-San</li>
                        <li>Farm expansion and labor needs</li>
                        <li>Importing enslaved workers vs. employing locals</li>
                        <li>Company control vs. independence</li>
                        <li>Frontier farming decisions</li>
                    </ul>
                    <p><strong>Historical Focus:</strong> Colonial expansion, labor systems, and settler independence</p>
                </div>

                <div class="character-info">
                    <h3>3. British Colonist </h3>
                    <p><strong>Role:</strong> A British official implementing British rule</p>
                    <p><strong>Timeline:</strong> Late 1700s after British takeover</p>
                    <p><strong>Historical Figure:</strong>  <strong>Lord Charles Somerset</strong> - Governor who influences policy decisions regarding indigenous rights</p>
                    <p><strong>Key Challenges:</strong></p>
                    <ul>
                        <li>Managing unhappy Dutch settlers (Boers)</li>
                        <li>Khoi-San rights and pass laws</li>
                        <li>Slavery abolition debates</li>
                        <li>The Great Trek migration</li>
                        <li>Frontier wars with Xhosa peoples</li>
                    </ul>
                    <p><strong>Historical Focus:</strong> Imperial administration, legal changes, and colonial conflicts</p>
                </div>

                <div class="character-info">
                    <h3>4. Bantu Character </h3>
                    <p><strong>Role:</strong> A farmer and herder from a Bantu-speaking community</p>
                    <p><strong>Timeline:</strong> From 1400s migration through the 1800s</p>
                    <p><strong>Historical Figure:</strong>  <strong>King Shaka Zulu</strong> - Powerful military leader who offers alliances and revolutionary warfare tactics</p>
                    <p><strong>Key Challenges:</strong></p>
                    <ul>
                        <li>Migration southward and establishing new settlements</li>
                        <li>Competition for land and resources with other groups</li>
                        <li>First contact with European settlers and trade decisions</li>
                        <li>Frontier conflicts and resistance wars</li>
                        <li>Cultural preservation vs. adaptation to colonial pressures</li>
                    </ul>
                    <p><strong>Historical Focus:</strong> Migration, agricultural development, and cultural survival</p>
                </div>

                <div class="game-mechanics">
                    <h3>Game Mechanics </h3>
                    
                    <h4>Choice-Based Narrative</h4>
                    <ul>
                        <li>5 scenes per character with 2 choices each</li>
                        <li>32 possible endings per character (based on choice combinations)</li>
                        <li>128 total possible endings across all four characters</li>
                        <li>Historical context boxes appear after major decisions</li>
                        <li>Visual backgrounds change with each scene using period-appropriate images</li>
                    </ul>

                    <h4>Educational Features</h4>
                    <ul>
                        <li><strong>Perspective-taking:</strong> Same historical events viewed from different angles</li>
                        <li><strong>Cause and effect:</strong> Choices have clear consequences on relationships and outcomes</li>
                        <li><strong>Historical accuracy:</strong> Each scenario includes real historical context</li>
                        <li><strong>Multiple playthroughs encouraged:</strong> "Try another character to see history from a different perspective!"</li>
                        <li><strong>Historical Figures:</strong> Famous South African historical figures appear at key decision points with authentic dialogue and educational facts</li>
                    </ul>

                    <h4>Collector System </h4>
                    <ul>
                        <li><strong>Ending Collection:</strong> Track all 128 possible endings across all four characters</li>
                        <li><strong>Progress Counter:</strong> See how many endings you've discovered on the main menu</li>
                        <li><strong>Unlock System:</strong> Collected endings are fully visible, while locked ones appear blurred with mystery titles</li>
                        <li><strong>Character Progress:</strong> View individual progress for each historical perspective (32 endings each)</li>
                        <li><strong>Persistent Tracking:</strong> Your progress is saved and persists across game sessions</li>
                        <li><strong>Replay Motivation:</strong> Discover all possible historical outcomes and decision paths</li>
                    </ul>

                    <h4>Mini-Game Collection </h4>
                    <ul>
                        <li><strong>Trading Challenge:</strong> Fast-paced item matching game unlocked after completing 8 trade-related endings</li>
                        <li><strong>Cattle Chase:</strong> Top-down herding game unlocked after completing 8 Farmer/Survival themed endings (any character)</li>
                        <li><strong>Harbor Hustle:</strong> Tetris-style loading game unlocked after completing 5 Diplomatic/Cooperation themed endings (any character)</li>
                        <li><strong>Frontier Wars:</strong> Space Invaders-style battle game unlocked after completing 8 Warrior/Resistance themed endings (any character)</li>
                        <li><strong>Fort Defense:</strong> Classic artillery game unlocked by scoring 100% on the Historical Knowledge Quiz (20/20 correct)</li>
                        <li><strong>Land Grab Maze:</strong> Ultimate Pac-Man style maze game unlocked after completing ALL 128 endings (100% completion)</li>
                        <li><strong>Educational Integration:</strong> Mini-games reinforce historical concepts from the main story</li>
                        <li><strong>Progressive Unlocking:</strong> Complete specific story requirements to access each mini-game</li>
                        <li><strong>Cross-Character Learning:</strong> Trade endings from both Khoi-San and Dutch characters count toward Trading Challenge unlock</li>
                        <li><strong>Historical Context:</strong> Each mini-game highlights important aspects of colonial South African life</li>
                    </ul>

                    <h4>Mini-Game Details </h4>
                    <ul>
                        <li><strong>Trading Challenge:</strong> Match items with their correct values from different cultural perspectives (Khoi-San vs Dutch)</li>
                        <li><strong>Cattle Chase:</strong> Guide cattle into kraals while avoiding obstacles, with alternating spawn locations and life-based scoring</li>
                        <li><strong>Harbor Hustle:</strong> Pack supplies onto ships using Tetris-style pieces with 30-second timer and grid-based placement</li>
                        <li><strong>Frontier Wars:</strong> Space Invaders-style battle where Bantu warriors () defend against waves of British soldiers () using traditional weapons</li>
                        <li><strong>Fort Defense:</strong> Classic artillery game where you adjust angle and velocity to hit enemy fortifications while accounting for wind effects</li>
                        <li><strong>Land Grab Maze:</strong> Pac-Man style maze where you collect resources while avoiding historical "ghosts" representing different colonial challenges</li>
                        <li><strong>Test Mode:</strong> Use the "Test All Games" button to try mini-games without completing unlock requirements</li>
                    </ul>

                    <h4>Unlock Requirements </h4>
                    <ul>
                        <li><strong>Trading Challenge:</strong> Complete 8 trade-related endings (any combination of Khoi-San trade_* or Dutch fair_trade_* endings)</li>
                        <li><strong>Cattle Chase:</strong> Complete 8 Farmer/Survival themed endings across any characters</li>
                        <li><strong>Harbor Hustle:</strong> Complete 5 Diplomatic/Cooperation themed endings across any characters</li>
                        <li><strong>Frontier Wars:</strong> Complete 8 Warrior/Resistance themed endings across any characters</li>
                        <li><strong>Fort Defense:</strong> Score 100% on the Historical Knowledge Quiz (answer all 20 questions correctly)</li>
                        <li><strong>Land Grab Maze:</strong> Complete ALL 128 endings across all characters (100% completion)</li>
                        <li><strong>Progress Tracking:</strong> See your unlock progress in the Mini-Game Collection screen</li>
                        <li><strong>Encouragement System:</strong> Get progress updates when completing relevant endings</li>
                    </ul>

                    <h4>Historical Figures Integration </h4>
                    <ul>
                        <li><strong>Featured Figures:</strong> Four famous South African historical figures appear at key decision points</li>
                        <li><strong>Autshumato (Harry the Strandloper):</strong> Khoi-San translator and trader in Scene 1 (First Contact)</li>
                        <li><strong>Jan van Riebeeck:</strong> Dutch commander who established Cape settlement in Scene 1 (Arrival)</li>
                        <li><strong>Lord Charles Somerset:</strong> British Governor influencing Khoi-San rights policy in Scene 2</li>
                        <li><strong>King Shaka Zulu:</strong> Powerful Zulu king offering military alliances in Scene 4 (Frontier Conflicts)</li>
                        <li><strong>Interactive Learning:</strong> Each figure provides authentic dialogue and historical context</li>
                        <li><strong>Educational Facts:</strong> "Did You Know?" boxes provide factual historical information</li>
                        <li><strong>Retro Styling:</strong> Historical figure modals match the game's 16-bit aesthetic</li>
                        <li><strong>Character Guidance:</strong> Figures influence player choices through their historical perspectives</li>
                    </ul>

                    <h4>Historical Knowledge Quiz </h4>
                    <ul>
                        <li><strong>Purpose:</strong> Test comprehensive understanding of South African colonial history across all character perspectives</li>
                        <li><strong>Format:</strong> 20 multiple choice questions covering Khoi-San, Dutch, British, and Bantu storylines</li>
                        <li><strong>Requirements:</strong> Must score 100% (20/20 correct) to unlock Fort Defense mini-game</li>
                        <li><strong>Content Coverage:</strong> Questions test knowledge of key historical events, relationships, challenges, and responses from all four character perspectives</li>
                        <li><strong>Retry System:</strong> Students can retake the quiz as many times as needed to achieve perfect score</li>
                        <li><strong>Educational Value:</strong> Reinforces learning by requiring mastery of content from all character storylines</li>
                        <li><strong>Access:</strong> Available from main menu via "Take the Quiz" button</li>
                    </ul>
                </div>
            </div>
        </div>

        <!-- Harbor Hustle Screen -->
        <div id="harborHustleScreen" class="harbor-hustle-screen" style="display: none;">
            <button class="back-button" onclick="exitHarborHustle()"> Exit Game</button>
            <h2 class="harbor-title"> Harbor Hustle</h2>
            <div class="harbor-info">
                <p>Load supplies onto ships before they sail! Drag items from the dock to the ship.</p>
                <p class="harbor-subtitle">Cape Town was a vital resupply station for ships traveling to the East Indies!</p>
            </div>
            
            <div class="harbor-stats">
                <div class="stat">
                    <span class="stat-label">Time:</span>
                    <span id="harborTime" class="stat-value">30</span>
                </div>
                <div class="stat">
                    <span class="stat-label">Score:</span>
                    <span id="harborScore" class="stat-value">0</span>
                </div>
                <div class="stat">
                    <span class="stat-label">Loaded:</span>
                    <span id="harborLoaded" class="stat-value">0/10</span>
                </div>
                <div class="stat">
                    <span class="stat-label">Level:</span>
                    <span id="harborLevel" class="stat-value">1</span>
                </div>
            </div>
            
            <div class="harbor-game-area">
                <div class="dock-area">
                    <h3>Dock Supplies</h3>
                    <div id="suppliesContainer" class="supplies-container">
                        <!-- Supplies will be dynamically added here -->
                    </div>
                </div>
                
                <div class="ship-area">
                    <h3>Ship Loading Zone</h3>
                    <div id="shipContainer" class="ship-container">
                        <div class="ship" id="mainShip">
                            <div class="ship-deck">
                                <div class="ship-mast"></div>
                                <div class="loading-zone" id="loadingZone">
                                    <p>Drop supplies here!</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="harbor-instructions">
                <p><strong>Instructions:</strong> Drag supplies from the dock to the ship's loading zone. Load all required supplies before time runs out!</p>
                <p><strong>Controls:</strong> Click and drag items, or use touch on mobile devices.</p>
            </div>
            
            <div class="harbor-controls">
                <button id="startHarborBtn" class="start-harbor-btn" onclick="startHarborHustle()">Start Loading!</button>
                <button id="restartHarborBtn" class="restart-harbor-btn" onclick="restartHarborHustle()" style="display: none;">Try Again</button>
            </div>
            
            <div id="harborGameOver" class="harbor-game-over" style="display: none;">
                <h3 id="harborGameOverTitle">Game Over!</h3>
                <p id="harborGameOverText">You didn't load enough supplies in time!</p>
                <div class="harbor-final-stats">
                    <p>Final Score: <span id="harborFinalScore">0</span></p>
                    <p>Supplies Loaded: <span id="harborFinalLoaded">0</span>/<span id="harborFinalNeeded">10</span></p>
                    <p>Level Reached: <span id="harborFinalLevel">1</span></p>
                </div>
                <button class="restart-harbor-btn" onclick="restartHarborHustle()">Try Again</button>
                <button class="exit-harbor-btn" onclick="exitHarborHustle()">Exit to Collection</button>
            </div>
        </div>

        <!-- Cattle Chase Screen -->
        <div id="cattleChaseScreen" class="cattle-chase-screen" style="display: none;">
            <button class="back-button" onclick="exitCattleChase()"> Exit Game</button>
            <h2 class="cattle-title"> Cattle Chase</h2>
            <div class="cattle-info">
                <p>Guide your cattle safely into the kraal while avoiding wild animals and settlers!</p>
                <p class="cattle-subtitle">Use arrow keys or WASD to move. Protect your precious cattle - they are your wealth and status!</p>
            </div>
            
            <div class="cattle-stats">
                <div class="stat">
                    <span class="stat-label">Lives:</span>
                    <span id="cattleLives" class="stat-value">3</span>
                </div>
                <div class="stat">
                    <span class="stat-label">Score:</span>
                    <span id="cattleScore" class="stat-value">0</span>
                </div>
                <div class="stat">
                    <span class="stat-label">Cattle in Kraal:</span>
                    <span id="cattleInKraal" class="stat-value">0/5</span>
                </div>
                <div class="stat">
                    <span class="stat-label">Level:</span>
                    <span id="cattleLevel" class="stat-value">1</span>
                </div>
            </div>
            
            <div id="cattleGameArea" class="cattle-game-area">
                <canvas id="cattleCanvas" width="800" height="600"></canvas>
                
                <div id="cattleInstructions" class="cattle-instructions">
                    <h3> How to Play</h3>
                    <p><strong>Goal:</strong> Guide 5 cattle into the kraal (pen) to complete each level</p>
                    <p><strong>Controls:</strong> Arrow keys or WASD to move your herder</p>
                    <p><strong>Avoid:</strong> Wild animals () and settlers () trying to steal your cattle</p>
                    <p><strong>Strategy:</strong> Lead cattle carefully - they follow behind you!</p>
                    <button class="start-cattle-btn" onclick="startCattleChase()">
                        <span class="play-icon"></span>
                        Start Game
                    </button>
                </div>
                
                <div id="cattleGameOver" class="cattle-game-over" style="display: none;">
                    <h3 id="cattleResultTitle">Game Complete!</h3>
                    <p id="cattleResultText">You successfully protected your cattle!</p>
                    <div class="historical-context">
                        <h4> Historical Context</h4>
                        <p id="cattleHistoricalText">Cattle were the foundation of Khoi-San society, representing wealth, status, and survival. Protecting them from wild animals, raiders, and later from settlers who wanted to claim them was a constant challenge that shaped Khoi-San life.</p>
                    </div>
                    <button class="restart-button" onclick="restartCattleChase()">Play Again</button>
                </div>
            </div>
        </div>

        <!-- Trading Challenge Screen -->
        <div id="tradingChallengeScreen" class="trading-challenge-screen" style="display: none;">
            <button class="back-button" onclick="exitTradingChallenge()"> Exit Challenge</button>
            <h2 class="trading-title"> Trading Challenge</h2>
            <div class="challenge-info">
                <p>Match items with their correct trade values before time runs out!</p>
                <p class="challenge-subtitle">Understanding trade misunderstandings that led to conflict</p>
            </div>
            
            <div class="game-stats">
                <div class="stat">
                    <span class="stat-label">Time:</span>
                    <span id="timeLeft" class="stat-value">60</span>
                </div>
                <div class="stat">
                    <span class="stat-label">Score:</span>
                    <span id="challengeScore" class="stat-value">0</span>
                </div>
                <div class="stat">
                    <span class="stat-label">Perspective:</span>
                    <span id="tradePerspective" class="stat-value">Khoi-San</span>
                </div>
            </div>
            
            <div id="tradingGameArea" class="trading-game-area">
                <div class="current-item">
                    <div id="currentTradeItem" class="trade-item-display">
                        <span id="itemIcon" class="item-icon"></span>
                        <span id="itemName" class="item-name">Cattle</span>
                    </div>
                </div>
                
                <div class="value-options">
                    <div id="valueOption1" class="value-option" onclick="selectValue(1)">
                        <span class="value-number">1</span>
                    </div>
                    <div id="valueOption2" class="value-option" onclick="selectValue(2)">
                        <span class="value-number">2</span>
                    </div>
                    <div id="valueOption3" class="value-option" onclick="selectValue(3)">
                        <span class="value-number">3</span>
                    </div>
                    <div id="valueOption4" class="value-option" onclick="selectValue(4)">
                        <span class="value-number">4</span>
                    </div>
                </div>
                
                <div id="challengeResult" class="challenge-result" style="display: none;">
                    <h3 id="resultTitle">Challenge Complete!</h3>
                    <p id="resultText">You scored 0 points out of 100!</p>
                    <div class="historical-context">
                        <h4> Historical Context</h4>
                        <p id="historicalText">Trade value misunderstandings often led to conflicts between groups with different economic systems.</p>
                    </div>
                    <button class="restart-button" onclick="restartTradingChallenge()">Play Again</button>
                </div>
            </div>
        </div>

        <!-- Mini-Game Collection Screen -->
        <div id="miniGameScreen" class="mini-game-screen" style="display: none;">
            <button class="back-button" onclick="hideMiniGameCollection()"> Back to Main Menu</button>
            <h2 class="mini-game-collection-title"> Mini-Game Collection</h2>
            <div class="mini-game-progress">
                <span id="miniGameProgress">0 of 5 mini-games unlocked</span>
            </div>
            
            <div class="mini-games-container">
                <div id="tradingChallengeMiniGame" class="mini-game-item locked">
                    <div class="mini-game-header">
                        <span class="mini-game-emoji"></span>
                        <div class="mini-game-info">
                            <h3 class="mini-game-title">Trading Challenge</h3>
                            <p class="mini-game-subtitle">Dutch / Khoi-San Trade Relations</p>
                        </div>
                        <div class="mini-game-status">
                            <span class="status-icon"></span>
                            <span class="status-text">Locked</span>
                        </div>
                    </div>
                    <div class="mini-game-description">
                        <p class="description-text">Match trade items with their correct values in this fast-paced challenge! Experience how cultural differences in value systems led to misunderstandings and conflicts between traders.</p>
                        <div class="unlock-condition">
                            <strong>Unlock by:</strong> Complete 8 trade-related endings (any character)
                        </div>
                    </div>
                    <div class="progress-bar-container">
                        <div class="progress-bar-label">
                            <span>Progress</span>
                            <span id="tradingProgressText">0/8</span>
                        </div>
                        <div class="progress-bar">
                            <div id="tradingProgressFill" class="progress-bar-fill" style="width: 0%"></div>
                        </div>
                    </div>
                    <div class="mini-game-actions">
                        <button class="play-mini-game-btn" onclick="playTradingChallenge()" disabled>
                            <span class="play-icon"></span>
                            Play Game
                        </button>
                    </div>
                </div>
                
                <div id="cattleChaseMiniGame" class="mini-game-item locked">
                    <div class="mini-game-header">
                        <span class="mini-game-emoji"></span>
                        <div class="mini-game-info">
                            <h3 class="mini-game-title">Cattle Chase</h3>
                            <p class="mini-game-subtitle">Khoi-San Herding Challenge</p>
                        </div>
                        <div class="mini-game-status">
                            <span class="status-icon"></span>
                            <span class="status-text">Locked</span>
                        </div>
                    </div>
                    <div class="mini-game-description">
                        <p class="description-text">Guide your precious cattle into the kraal while avoiding wild animals and settlers! A Frogger-style chase game that shows how central cattle were to Khoi-San wealth and survival.</p>
                        <div class="unlock-condition">
                            <strong>Unlock by:</strong> Complete 8 Farmer/Survival themed endings (any character)
                        </div>
                    </div>
                    <div class="progress-bar-container">
                        <div class="progress-bar-label">
                            <span>Progress</span>
                            <span id="cattleProgressText">0/8</span>
                        </div>
                        <div class="progress-bar">
                            <div id="cattleProgressFill" class="progress-bar-fill" style="width: 0%"></div>
                        </div>
                    </div>
                    <div class="mini-game-actions">
                        <button class="play-mini-game-btn" onclick="playCattleChase()" disabled>
                            <span class="play-icon"></span>
                            Play Game
                        </button>
                    </div>
                </div>
                
                <div id="harborHustleMiniGame" class="mini-game-item locked">
                    <div class="mini-game-header">
                        <span class="mini-game-emoji"></span>
                        <div class="mini-game-info">
                            <h3 class="mini-game-title">Harbor Hustle</h3>
                            <p class="mini-game-subtitle">Dutch/British Loading Challenge</p>
                        </div>
                        <div class="mini-game-status">
                            <span class="status-icon"></span>
                            <span class="status-text">Locked</span>
                        </div>
                    </div>
                    <div class="mini-game-description">
                        <p class="description-text">Load supplies onto ships before they sail! Drag items from the dock to the ship in this fast-paced sorting game. Cape Town was a vital resupply station for ships traveling to the East Indies.</p>
                        <div class="unlock-condition">
                            <strong>Unlock by:</strong> Complete 5 Diplomatic/Cooperation themed endings (any character)
                        </div>
                    </div>
                    <div class="progress-bar-container">
                        <div class="progress-bar-label">
                            <span>Progress</span>
                            <span id="harborProgressText">0/5</span>
                        </div>
                        <div class="progress-bar">
                            <div id="harborProgressFill" class="progress-bar-fill" style="width: 0%"></div>
                        </div>
                    </div>
                    <div class="mini-game-actions">
                        <button class="play-mini-game-btn" onclick="playHarborHustle()" disabled>
                            <span class="play-icon"></span>
                            Play Game
                        </button>
                    </div>
                </div>
                
                <div id="frontierWarsMiniGame" class="mini-game-item locked">
                    <div class="mini-game-header">
                        <span class="mini-game-emoji"></span>
                        <div class="mini-game-info">
                            <h3 class="mini-game-title">Frontier Wars</h3>
                            <p class="mini-game-subtitle">Bantu Resistance Challenge</p>
                        </div>
                        <div class="mini-game-status">
                            <span class="status-icon"></span>
                            <span class="status-text">Locked</span>
                        </div>
                    </div>
                    <div class="mini-game-description">
                        <p class="description-text">Defend your community against colonial forces in this Space Invaders-style battle! Fight off waves of British soldiers using traditional Bantu weapons. Experience the intensity of frontier warfare and resistance that Bantu communities faced during colonial expansion.</p>
                        <div class="unlock-condition">
                            <strong>Unlock by:</strong> Complete 8 Warrior/Resistance themed endings (any character)
                        </div>
                    </div>
                    <div class="progress-bar-container">
                        <div class="progress-bar-label">
                            <span>Progress</span>
                            <span id="frontierProgressText">0/8</span>
                        </div>
                        <div class="progress-bar">
                            <div id="frontierProgressFill" class="progress-bar-fill" style="width: 0%"></div>
                        </div>
                    </div>
                    <div class="mini-game-actions">
                        <button class="play-mini-game-btn" onclick="playFrontierWars()" disabled>
                            <span class="play-icon"></span>
                            Play Game
                        </button>
                    </div>
                </div>
                
                <div id="fortDefenseMiniGame" class="mini-game-item locked">
                    <div class="mini-game-header">
                        <span class="mini-game-emoji"></span>
                        <div class="mini-game-info">
                            <h3 class="mini-game-title">Fort Defense</h3>
                            <p class="mini-game-subtitle">Quiz Unlock Challenge</p>
                        </div>
                        <div class="mini-game-status">
                            <span class="status-icon"></span>
                            <span class="status-text">Locked</span>
                        </div>
                    </div>
                    <div class="mini-game-description">
                        <p class="description-text">Defend your fort by launching projectiles at the enemy! A classic artillery game where you must adjust angle and velocity to hit your target while accounting for wind. Experience the strategic warfare of colonial South African fortifications!</p>
                        <div class="unlock-condition">
                            <strong>Unlock by:</strong> Score 100% on the Historical Knowledge Quiz (20/20 correct)
                        </div>
                    </div>
                    <div class="progress-bar-container">
                        <div class="progress-bar-label">
                            <span>Progress</span>
                            <span id="fortDefenseProgressText">0/20</span>
                        </div>
                        <div class="progress-bar">
                            <div id="fortDefenseProgressFill" class="progress-bar-fill" style="width: 0%"></div>
                        </div>
                    </div>
                    <div class="mini-game-actions">
                        <button class="play-mini-game-btn" onclick="playFortDefenseFromCollection()" disabled>
                            <span class="play-icon"></span>
                            Play Game
                        </button>
                    </div>
                </div>
                
                <div id="landGrabMazeMiniGame" class="mini-game-item locked">
                    <div class="mini-game-header">
                        <span class="mini-game-emoji"></span>
                        <div class="mini-game-info">
                            <h3 class="mini-game-title">Land Grab Maze</h3>
                            <p class="mini-game-subtitle">Ultimate Achievement Challenge</p>
                        </div>
                        <div class="mini-game-status">
                            <span class="status-icon"></span>
                            <span class="status-text">Locked</span>
                        </div>
                    </div>
                    <div class="mini-game-description">
                        <p class="description-text">The ultimate challenge! A Pac-Man inspired maze game where you navigate through South African colonial history, collecting resources while avoiding the ghosts of history. Choose your character and experience the land grab from different perspectives!</p>
                        <div class="unlock-condition">
                            <strong>Unlock by:</strong> Complete ALL 128 endings across all characters (100% completion)
                        </div>
                    </div>
                    <div class="progress-bar-container">
                        <div class="progress-bar-label">
                            <span>Progress</span>
                            <span id="mazeProgressText">0/128</span>
                        </div>
                        <div class="progress-bar">
                            <div id="mazeProgressFill" class="progress-bar-fill" style="width: 0%"></div>
                        </div>
                    </div>
                    <div class="mini-game-actions">
                        <button class="play-mini-game-btn" onclick="playLandGrabMaze()" disabled>
                            <span class="play-icon"></span>
                            Play Game
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Frontier Wars Screen -->
        <div id="frontierWarsScreen" class="frontier-wars-screen" style="display: none;">
            <button class="back-button" onclick="exitFrontierWars()"> Exit Game</button>
            <h2 class="frontier-wars-title"> Frontier Wars</h2>
            <div class="frontier-wars-info">
                <p>Defend your community against colonial forces! Fight off waves of enemies in this Space Invaders-style battle.</p>
                <p class="frontier-wars-subtitle">Experience the intensity of frontier warfare and resistance!</p>
            </div>
            
            <div class="frontier-wars-stats">
                <div class="stat">
                    <span class="stat-label">Lives:</span>
                    <span id="frontierLives" class="stat-value">3</span>
                </div>
                <div class="stat">
                    <span class="stat-label">Score:</span>
                    <span id="frontierScore" class="stat-value">0</span>
                </div>
                <div class="stat">
                    <span class="stat-label">Wave:</span>
                    <span id="frontierWave" class="stat-value">1</span>
                </div>
                <div class="stat">
                    <span class="stat-label">Enemies:</span>
                    <span id="frontierDefenders" class="stat-value">50</span>
                </div>
            </div>
            
            <div id="frontierGameArea" class="frontier-game-area">
                <canvas id="frontierCanvas" width="800" height="600"></canvas>
                
                <div id="frontierInstructions" class="frontier-instructions">
                    <h3> How to Play</h3>
                    <p><strong>Goal:</strong> Destroy all enemies in each wave to advance!</p>
                    <p><strong>Controls:</strong> Arrow Keys or A/D to move, Spacebar to shoot</p>
                    <p><strong>Strategy:</strong> Shoot enemies before they reach you or shoot back!</p>
                    <p><strong>Challenge:</strong> Each wave gets faster and more intense!</p>
                    <button class="start-frontier-btn" onclick="startFrontierWars()">
                        <span class="play-icon"></span>
                        Start Battle
                    </button>
                </div>
                
                <div id="frontierGameOver" class="frontier-game-over" style="display: none;">
                    <h3 id="frontierResultTitle">Defense Complete!</h3>
                    <p id="frontierResultText">You successfully defended your community!</p>
                    <div class="historical-context">
                        <h4> Historical Context</h4>
                        <p id="frontierHistoricalText">The frontier wars were complex conflicts involving multiple groups fighting for land, resources, and survival. Bantu communities used various strategies to resist colonial expansion and protect their way of life.</p>
                    </div>
                    <button class="restart-button" onclick="restartFrontierWars()">Play Again</button>
                </div>
            </div>
        </div>

        <!-- Land Grab Maze Screen -->
        <div id="landGrabMazeScreen" class="land-grab-maze-screen" style="display: none;">
            <button class="back-button" onclick="exitLandGrabMaze()"> Exit Game</button>
            <h2 class="maze-title"> Land Grab Maze</h2>
            <div class="maze-info">
                <p>Navigate the maze, collect resources, and avoid the ghosts of history!</p>
                <p class="maze-subtitle">A Pac-Man inspired adventure through South African colonial history</p>
            </div>
            
            <div class="character-selection-maze">
                <div class="character-card-maze" onclick="selectMazeCharacter('khoisan')">
                    <div class="character-icon-maze"></div>
                    <div class="character-name-maze">Khoi-San</div>
                    <div class="character-description-maze">Hunter & Herder</div>
                </div>
                <div class="character-card-maze" onclick="selectMazeCharacter('dutch')">
                    <div class="character-icon-maze"></div>
                    <div class="character-name-maze">Dutch Settler</div>
                    <div class="character-description-maze">Colonist & Trader</div>
                </div>
                <div class="character-card-maze" onclick="selectMazeCharacter('british')">
                    <div class="character-icon-maze"></div>
                    <div class="character-name-maze">British Colonist</div>
                    <div class="character-description-maze">Administrator & Ruler</div>
                </div>
                <div class="character-card-maze" onclick="selectMazeCharacter('bantu')">
                    <div class="character-icon-maze"></div>
                    <div class="character-name-maze">Bantu Farmer</div>
                    <div class="character-description-maze">Farmer & Warrior</div>
                </div>
            </div>
            
            <div class="power-up-display">
                <div id="peaceTreaty" class="power-up-item">
                    <div class="power-up-icon"></div>
                    <div class="power-up-name">Peace Treaty</div>
                    <div class="power-up-timer" id="peaceTimer">0s</div>
                </div>
                <div id="resistanceShield" class="power-up-item">
                    <div class="power-up-icon"></div>
                    <div class="power-up-name">Resistance Shield</div>
                    <div class="power-up-timer" id="shieldTimer">0s</div>
                </div>
                <div id="migrationPath" class="power-up-item">
                    <div class="power-up-icon"></div>
                    <div class="power-up-name">Migration Path</div>
                    <div class="power-up-timer" id="migrationTimer">0s</div>
                </div>
            </div>
            
            <div class="maze-stats">
                <div class="stat">
                    <span class="stat-label">Score:</span>
                    <span id="mazeScore" class="stat-value">0</span>
                </div>
                <div class="stat">
                    <span class="stat-label">Lives:</span>
                    <span id="mazeLives" class="stat-value">3</span>
                </div>
                <div class="stat">
                    <span class="stat-label">Resources:</span>
                    <span id="mazeResources" class="stat-value">0/50</span>
                </div>
                <div class="stat">
                    <span class="stat-label">Level:</span>
                    <span id="mazeLevel" class="stat-value">1</span>
                </div>
            </div>
            
            <div id="mazeGameArea" class="maze-game-area">
                <canvas id="mazeCanvas" width="600" height="600"></canvas>
                
                <!-- Start Button Below Canvas -->
                <div class="maze-start-section">
                    <button class="start-maze-btn" onclick="startLandGrabMaze()" id="startMazeBtn">
                        <span class="play-icon"></span>
                        Start Game
                    </button>
                </div>
                
                <!-- Game Information Section -->
                <div id="mazeInstructions" class="maze-instructions">
                    <h3> How to Play</h3>
                    <p><strong>Goal:</strong> Collect all resources while avoiding ghosts! Complete 3 levels to win.</p>
                    <p><strong>Controls:</strong> Arrow keys or WASD to move your character</p>
                    
                    <div class="game-info-grid">
                        <div class="info-section">
                            <h4> Resources (Collect All)</h4>
                            <ul>
                                <li> <strong>Cattle</strong> - 10 points each, vital for survival</li>
                                <li> <strong>Corn</strong> - 5 points each, food source</li>
                                <li> <strong>Beads</strong> - 15 points each, trade goods</li>
                                <li> <strong>Tools</strong> - 8 points each, essential equipment</li>
                            </ul>
                        </div>
                        
                        <div class="info-section">
                            <h4> Ghosts (Avoid These!)</h4>
                            <ul>
                                <li> <strong>Disease</strong> - Moves randomly, unpredictable</li>
                                <li> <strong>Colonial</strong> - Hunts you directly, very dangerous</li>
                                <li> <strong>Law</strong> - Blocks paths, limits movement</li>
                                <li> <strong>War</strong> - Charges at you, aggressive</li>
                            </ul>
                        </div>
                        
                        <div class="info-section">
                            <h4> Power-ups (Temporary Help)</h4>
                            <ul>
                                <li> <strong>Peace Treaty</strong> - Ghosts avoid you (30s)</li>
                                <li> <strong>Resistance Shield</strong> - Chase ghosts away (20s)</li>
                                <li> <strong>Migration Path</strong> - Create shortcuts (25s)</li>
                            </ul>
                        </div>
                    </div>
                </div>
                
                <div id="mazeGameOver" class="maze-game-over" style="display: none;">
                    <h3 id="mazeResultTitle">Game Complete!</h3>
                    <p id="mazeResultText">You successfully collected all resources!</p>
                    <div class="historical-context">
                        <h4> Historical Reflection</h4>
                        <p id="mazeHistoricalText">Your people survived but lost much of their land.</p>
                    </div>
                    <button class="restart-button" onclick="restartLandGrabMaze()">Play Again</button>
                </div>
            </div>
        </div>

        <!-- Quiz Screen -->
        <div id="quizScreen" class="quiz-screen" style="display: none;">
            <button class="back-button" onclick="hideQuiz()"> Back to Main Menu</button>
            <h2 class="quiz-title"> Historical Knowledge Quiz</h2>
            <div class="quiz-info">
                <p>Test your knowledge of South African colonial history! Answer all 20 questions correctly to unlock Fort Defense.</p>
                <p class="quiz-subtitle">You need 100% to unlock the special mini-game!</p>
            </div>
            
            <div class="quiz-progress">
                <span id="quizProgress">Question 1 of 20</span>
            </div>
            
            <div class="quiz-container">
                <div id="quizQuestion" class="quiz-question">
                    <!-- Questions will be populated by JavaScript -->
                </div>
                
                <div class="quiz-options">
                    <button class="quiz-option" onclick="selectAnswer('A')">
                        <span class="option-letter">A</span>
                        <span class="option-text" id="optionA">Option A</span>
                    </button>
                    <button class="quiz-option" onclick="selectAnswer('B')">
                        <span class="option-letter">B</span>
                        <span class="option-text" id="optionB">Option B</span>
                    </button>
                    <button class="quiz-option" onclick="selectAnswer('C')">
                        <span class="option-letter">C</span>
                        <span class="option-text" id="optionC">Option C</span>
                    </button>
                    <button class="quiz-option" onclick="selectAnswer('D')">
                        <span class="option-letter">D</span>
                        <span class="option-text" id="optionD">Option D</span>
                    </button>
                </div>
                
                <div class="quiz-controls">
                    <button id="submitQuizBtn" class="submit-quiz-btn" onclick="submitQuiz()" disabled>Submit Quiz</button>
                </div>
            </div>
            
            <div id="quizResult" class="quiz-result" style="display: none;">
                <h3 id="quizResultTitle">Quiz Complete!</h3>
                <p id="quizResultText">You scored 0/20 correct answers.</p>
                <div id="quizSuccess" class="quiz-success" style="display: none;">
                    <p> Congratulations! You've unlocked Fort Defense!</p>
                    <button class="play-fort-defense-btn" onclick="playFortDefense()">Play Fort Defense</button>
                </div>
                <div id="quizFailure" class="quiz-failure" style="display: none;">
                    <p> Sorry, you need 100% to unlock Fort Defense. Try again later!</p>
                    <button class="restart-quiz-btn" onclick="restartQuiz()">Try Again</button>
                </div>
            </div>
        </div>

        <!-- Fort Defense Screen -->
        <div id="fortDefenseScreen" class="fort-defense-screen" style="display: none;">
            <button class="back-button" onclick="exitFortDefense()"> Exit Game</button>
            <h2 class="fort-defense-title"> Fort Defense</h2>
            <div class="fort-defense-info">
                <p>Defend your fort by launching projectiles at the enemy! Adjust angle and velocity to hit your target.</p>
                <p class="fort-defense-subtitle">A classic artillery game with historical South African fortifications!</p>
            </div>
            
            <div class="fort-defense-stats">
                <div class="stat">
                    <span class="stat-label">Player Score:</span>
                    <span id="playerScore" class="stat-value">0</span>
                </div>
                <div class="stat">
                    <span class="stat-label">Enemy Score:</span>
                    <span id="enemyScore" class="stat-value">0</span>
                </div>
                <div class="stat">
                    <span class="stat-label">Wind:</span>
                    <span id="windSpeed" class="stat-value">0</span>
                </div>
                <div class="stat">
                    <span class="stat-label">Turn:</span>
                    <span id="currentTurn" class="stat-value">Player</span>
                </div>
            </div>
            
            <div class="fort-defense-game-area">
                <canvas id="fortDefenseCanvas" width="800" height="500"></canvas>
                
                <div class="fort-defense-controls">
                    <div class="control-group">
                        <label for="angleSlider">Angle: <span id="angleValue">45</span></label>
                        <input type="range" id="angleSlider" min="0" max="90" value="45" oninput="updateAngle()">
                    </div>
                    <div class="control-group">
                        <label for="velocitySlider">Velocity: <span id="velocityValue">50</span></label>
                        <input type="range" id="velocitySlider" min="10" max="100" value="50" oninput="updateVelocity()">
                    </div>
                    <button id="fireBtn" class="fire-btn" onclick="fireProjectile()">Fire!</button>
                </div>
            </div>
            
            <div class="fort-defense-instructions">
                <h3> How to Play</h3>
                <p><strong>Goal:</strong> Destroy the enemy fort by hitting it with projectiles!</p>
                <p><strong>Controls:</strong> Adjust angle (0-90) and velocity (10-100), then click Fire!</p>
                <p><strong>Wind:</strong> Watch the wind indicator - it affects projectile trajectory!</p>
                <p><strong>Strategy:</strong> Account for wind and distance to hit your target accurately!</p>
            </div>
            
            <div id="fortDefenseGameOver" class="fort-defense-game-over" style="display: none;">
                <h3 id="fortDefenseResultTitle">Game Over!</h3>
                <p id="fortDefenseResultText">The battle is complete!</p>
                <div class="fort-defense-final-stats">
                    <p>Final Score - Player: <span id="finalPlayerScore">0</span> | Enemy: <span id="finalEnemyScore">0</span></p>
                </div>
                <button class="restart-fort-defense-btn" onclick="restartFortDefense()">Play Again</button>
                <button class="exit-fort-defense-btn" onclick="exitFortDefense()">Exit to Collection</button>
            </div>
        </div>

        <!-- Collector Screen -->
        <div id="collectorScreen" class="collector-screen" style="display: none;">
            <button class="back-button" onclick="hideCollector()"> Back to Main Menu</button>
            <h2 class="collector-title"> Endings Collection</h2>
            <div class="collector-progress">
                <span id="collectorProgress">0 of 128 endings discovered</span>
            </div>
            
            <div class="character-tabs">
                <button class="tab-button active" onclick="showCharacterEndings('khoisan')">
                     Khoi-San <span id="khoisanCount">(0/32)</span>
                </button>
                <button class="tab-button" onclick="showCharacterEndings('dutch')">
                     Dutch <span id="dutchCount">(0/32)</span>
                </button>
                <button class="tab-button" onclick="showCharacterEndings('britishColonist')">
                     British <span id="britishCount">(0/32)</span>
                </button>
                <button class="tab-button" onclick="showCharacterEndings('bantu')">
                     Bantu <span id="bantuCount">(0/32)</span>
                </button>
            </div>

            <div class="endings-container">
                <div id="khoisanEndings" class="character-endings active">
                    <!-- Endings will be populated by JavaScript -->
                </div>
                <div id="dutchEndings" class="character-endings">
                    <!-- Endings will be populated by JavaScript -->
                </div>
                <div id="britishColonistEndings" class="character-endings">
                    <!-- Endings will be populated by JavaScript -->
                </div>
                <div id="bantuEndings" class="character-endings">
                    <!-- Endings will be populated by JavaScript -->
                </div>
            </div>
        </div>
    </div>

    <script src="game.js"></script>
    
    <!-- Footer -->
    <footer style="text-align: center; padding: 20px; background-color: #2c3e50; color: #ecf0f1; font-family: 'Courier New', monospace; font-size: 14px; margin-top: 20px; width: 100%; box-sizing: border-box;">
        Created by <a href="https://katalystlabs.co.za/" target="_blank" rel="noopener noreferrer" style="color: #3498db; text-decoration: none;">KatalystLabs</a> 2025
    </footer>
</body>
</html>
